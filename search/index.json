[{"content":"TL;DR üß© IQ Fit is an award winning 3D puzzle game, which turns out to be a combinatorial problem!\nüßÆ You can formulate it as a MIP, a pure Binary Program to be more precise.\nüë®‚Äçüëß It is more fun to play it with your daughter/son rather than formulating.\nBackground A few weeks ago while walking in a toys shop, my daughter showed us a 3D puzzle game. She told us that she plays with it at school and likes it a lot.\nThe idea of the game is, similar to any other puzzle, is pretty straightforward: you have pieces, and you have a board that you need to completely fill. The catch is, the pieces are 3D but the board is 2D. Hence, the player needs to orientate the pieces such that they fill up the board and keep the 2D.\nI found this fabulous blog post about the game, by Raf Peeters, the designer, where he explains more.\nUnderstanding the game Let me summarize the facts about the puzzle:\nThe board has 50 holes, formed as a 5 by 10 matrix There are 10 pieces, each with different color Each piece has 2 usable sides A challenge is defined by a certain placement of a subset of the pieces and the goal is to fill up the board entirely with the remaining ones Below image shows an example challenge (left) and its solution (right): Modeling As a mathematical optimization practitioner, inevitably I started formulating the game in my mind as a mathematical optimization model while we played it. For the general audience, in short:\nMathematical optimization is the process of finding a solution to a problem, where the solution minimizes (or maximizes) a certain objective. A mathematical model represents a problem with variables and constraints. The former correspond to decisions while the latter correspond to actual and/or desired limitations.\nLet\u0026rsquo;s start with defining what our decisions are. A way to look at it is as follows: we select one of the remaining pieces and place it to the board in a certain way. As defined above, each piece has 2 usable sides. Raf Peeters provides a beautfiul representation of the pieces as: This representation is, however, incomplete for our purposes since it misses the orientation of the side. Let\u0026rsquo;s take a side of the dark blue piece for instance. You can place it on the board in 4 different orientations:\nVariables The player chooses one side and one orientation to place on the board for each piece. Let $C$ be the set of colors and $O$ be the exhaustive set of combinations of a side and orientation for each color. Then $o(c)$ will represent a certain color, side and orientation. Let\u0026rsquo;s call $o(c)$ an option of color $c$.\nTo represent placement of a piece on the board, let\u0026rsquo;s first determine the way we represent the board itself. It consists of 50 holes, shaped as a 5 by 10 matrix. Intuitively, we can represent each hole as a point, $(x,y)$. Let\u0026rsquo;s denote the bottom left as $(0,0)$, namely the origin.\nOur task is to place the pieces onto the board. For that, having a reference point of $o(c)$, namely the option, would be handy. We can then relatively express every other ball or point of the option. Our decision will be: \u0026ldquo;where the reference point of the option will be placed in the board\u0026rdquo;. Although, this is intuitive for human intelligence, from mathematical point of view, following is handier: \u0026ldquo;the reference point of the option is placed to $(x,y)$, or not.\u0026rdquo;. Then our decision variable is:\n$$ x_{o(c),p} = \\begin{cases} 1 \u0026amp;\\text{if $o(c)$ is placed at point $p$} \\\\ 0 \u0026amp;\\text{otherwise } \\end{cases} $$\nLet\u0026rsquo;s circle back to the example above and focus on the placement of the dark blue piece. Below image points which ball we assume to be the reference point and its placement at $(8,3)$ on the board. Note that it is not possible to place this piece with the same orientation at $(8,4)$, since one ball will be out of the board. To generate exahustive list of options, one can determine a reference point for all colors, sides and orientations, enumerate all the points of the board and check whether the piece fits in the board entirely.\nConstraints The first rule and the objective of the game is to fill up the board entirely. In other words, each point on the board needs to have exactly 1 ball assigned to it. Let\u0026rsquo;s define set $(O,P)(p)$ such that if the reference point of orientation $o(c)$ of color $(c)$ is placed at $p$, then one of the balls of the piece is filling up point $p$.\nIn the example above, when the reference point of dark blue piece is placed at $(8,3)$, following points are filled with dark blue: ${(8,3),(9,3), (9,4), (9,2)}$. Then, in order to make sure that all the points in the board are filled, we can express the constraint as follows:\n$$ \\sum_{o(c), p\u0026rsquo; \\in (O,P)(p))} x_{o(c),p\u0026rsquo;} = 1 \\quad \\forall p $$\nConstraints are elements of a mathematical model that determines whether a solution is feasible. However, counter intuitively, we also need to express the physical restrictions as well. Anyone playing this game knows by heart that he/she needs to use each piece exactly once. Below constraint expresses the same thing, only cooler:\n$$ \\sum_o x_{o(c),p} = 1 \\quad \\forall c $$\nObjective Probably the easiest part is the objective: there is none. Since we expressed the objective of filling up the entire board as a constraint, the model becomes a feasibility problem. Hence, we can leave it blank:\n$$ min \\quad 0 $$\nHow to input a challenge? A challenge is defined as fixed placement of subset of the pieces. Then inputting a challenge to the model means enforcing those selections. Circling back to the example challenge above, to fix the red piece we need to fix the variable corresponding to reference point placement to $(1,3)$ as below image illustrates:\nConclusion First of all, kudos to Raf Peeters, for designing this brilliant game. Even though it was a fun practice to formulate it, to be honest, I prefer playing the challenges with my daughter and the hardest ones with my wife. Moreover, even though I formulated it as a mathematical optimization model, it is rather a feasibility problem since there\u0026rsquo;s no objective to optimize for. Formulating it as a constraint programming model can be also a good practice, to also touch upon constraint satisfaction phenomenon.\n","date":"2023-10-18T06:25:15Z","image":"https://serkankalay.github.io/p/formulating-iq-fit-as-mip/header_hua52ff6977716de1b050619b0c037a182_294541_120x120_fill_q75_box_smart1.jpeg","permalink":"https://serkankalay.github.io/p/formulating-iq-fit-as-mip/","title":"üß© Formulating a game as MIP"},{"content":"I am Serkan.\nI have always wanted to start writing about various things I observe, am curious about and/or have an opinion on. In most cases, these topics relate to mathematical optimization, which luckily is one of my -numerous- passions but also my job (ü§ë). I am also interested in aviation, food and pretty much anything that is smart.\nI have worked in a handful of companies ranging from airlines (‚úàÔ∏è) to online retailers (üíà), and from consultancy (üëî) to software product companies (üñ•Ô∏è).\nI hold a PhD in large scale mathematical optimization and I have 10+ years of experience in building optimizer tools in different settings and with different duties.\nI enjoy cracking tough problems with mathematical optimization (üßÆ) by enabling smart decision making. I also have interest in software engineering (‚å®Ô∏è).\nData scientists are usually focused on getting things done (üéØ), which makes sense. However, when developing an algorithm or modeling a problem, on top of technical knowledge, a data scientist needs to rely on creativity (üí°) and capability to think differently. The peace of mind that software craftsmanship (üõ†Ô∏è) provides is hence something you need, to solve a problem. (Will definitely write a post about my view on solving a problem).\nI am planning to start with a frequency of at least 1 post per month, aiming for a sustainable output rate. I understand that content creation is a very sophisticated task, requiring high level of enthusiasm and discipline. Well, I believe I just challenged myself into it üòÅ\nStay tuned! üßëüèª‚ÄçüíªüèÉüèª‚Äç‚ôÇÔ∏è\nNB: I took the cover picture. This is a place from my daily walking path, and I try to take the exact same picture from the exact same spot. Not sure what to do with those yet, but I am positive that I can make something beautiful out of it.\n","date":"2023-10-09T00:00:00Z","image":"https://serkankalay.github.io/p/hello-world/header_hu463c2304440f3a0d531bf5cd4278445a_1892795_120x120_fill_box_smart1_3.png","permalink":"https://serkankalay.github.io/p/hello-world/","title":"üëã Hello World (duh)"}]